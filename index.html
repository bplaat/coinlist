<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptocurrency coins list</title>
    <link rel="stylesheet" href="/style.css">
    <script src="/vue.min.js"></script>
</head>
<body>
    <div id="app">
        <div class="columns">
            <div class="column">
                <h1 class="header"><a href="/">Cryptocurrency coins list</a></h1>
            </div>

            <div class="column options">
                <select class="select" v-model="baseCurrency">
                    <option value="USD">US Dollar (USD)</option>
                    <option value="EUR">Euro (EUR)</option>
                    <option value="BTC">Bitcoin (BTC)</option>
                </select>
            </div>
        </div>

        <p v-cloak v-if="global != null">
            <span class="item">
                <strong>Total Market Cap:</strong>
                {{ global.total_market_cap[baseCurrency.toLowerCase()] | currency(baseCurrency) }}
                <span :class="changePercentColor(global.market_cap_change_percentage_24h_usd)">
                    {{ global.market_cap_change_percentage_24h_usd | changePercent }}
                </span>
            </span>

            <span class="item">
                <strong>Volume (24h):</strong>
                {{ global.total_volume[baseCurrency.toLowerCase()] | currency(baseCurrency) }}
            </span>

            <span class="item">
                <strong>Dominance:</strong>
                BTC {{ global.market_cap_percentage.btc | percent }}
                ETH {{ global.market_cap_percentage.eth | percent }}
            </span>
        </p>
        <p v-else>
            Loading...
        </p>

        <table class="table">
            <thead>
                <tr>
                    <th style="width: 4%" @click="sortCoin('market_cap_rank')"># {{ sortCoinArrow('market_cap_rank') }}</th>
                    <th style="width: 20%" @click="sortCoin('name')">Name {{ sortCoinArrow('name') }}</th>
                    <th style="width: 7%" @click="sortCoin('current_price')">Price {{ sortCoinArrow('current_price') }}</th>
                    <th style="width: 6%" @click="sortCoin('price_change_percentage_1h_in_currency')">1H {{ sortCoinArrow('price_change_percentage_1h_in_currency') }}</th>
                    <th style="width: 6%" @click="sortCoin('price_change_percentage_24h_in_currency')">1D {{ sortCoinArrow('price_change_percentage_24h_in_currency') }}</th>
                    <th style="width: 6%" @click="sortCoin('price_change_percentage_7d_in_currency')">1W {{ sortCoinArrow('price_change_percentage_7d_in_currency') }}</th>
                    <th style="width: 14%" @click="sortCoin('market_cap')">Market Cap {{ sortCoinArrow('market_cap') }}</th>
                    <th style="width: 14%" @click="sortCoin('total_volume')">Volume (24h) {{ sortCoinArrow('total_volume') }}</th>
                    <th style="width: 16%" @click="sortCoin('circulating_supply')">Circulating Supply {{ sortCoinArrow('circulating_supply') }}</th>
                    <th style="width: 7%" @click="sortCoin('ath')">ATH {{ sortCoinArrow('ath') }}</th>
                </tr>
            </thead>
            <tbody v-cloak v-if="coins.length > 0">
                <tr class="coin" v-for="coin in sortedCoins">
                    <td>{{ coin.market_cap_rank }}</td>
                    <td>
                        <img class="coin-icon" :src="coin.image" :alt="coin.name + ' icon'" loading="lazy">
                        {{ coin.name }} <span class="coin-symbol">{{ coin.symbol.toUpperCase() }}</span>
                    </td>
                    <td>{{ coin.current_price | currency(baseCurrency) }}</td>
                    <td :class="changePercentColor(coin.price_change_percentage_1h_in_currency)">{{ coin.price_change_percentage_1h_in_currency | changePercent }}</td>
                    <td :class="changePercentColor(coin.price_change_percentage_24h_in_currency)">{{ coin.price_change_percentage_24h_in_currency | changePercent }}</td>
                    <td :class="changePercentColor(coin.price_change_percentage_7d_in_currency)">{{ coin.price_change_percentage_7d_in_currency | changePercent }}</td>
                    <td>{{ coin.market_cap | currency(baseCurrency) }}</td>
                    <td>{{ coin.total_volume | currency(baseCurrency) }}</td>
                    <td v-if="coin.total_supply != null && coin.circulating_supply != coin.total_supply">
                        {{ coin.circulating_supply | number }} {{ coin.symbol.toUpperCase() }}<br>
                        {{ coin.total_supply | number }} {{ coin.symbol.toUpperCase() }}
                    </td>
                    <td v-else>
                        {{ coin.circulating_supply | number }} {{ coin.symbol.toUpperCase() }}
                    </td>
                    <td>{{ coin.ath | currency(baseCurrency) }}</td>
                </tr>
            </tbody>
            <tbody v-else>
                <tr>
                    <td colspan="10">Loading...</td>
                </tr>
            </tbody>
        </table>
        <p>Made by <a href="https://bastiaan.ml/" target="_blank">Bastiaan van der Plaat</a> for you to get fast cryptocurrency coins information</p>
    </div>

    <script src="/script.js"></script>
</body>
</html>
